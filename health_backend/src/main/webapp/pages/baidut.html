<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <title>批量反地址解析+商圈</title>
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }
        #l-map {
            height: 500px;
            width: 100%;
        }
    </style>
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=kvkFmM030XoSKBdYetU5QjgP9QL2Tw9Q"></script>
</head>
<body>
<div id="l-map"></div>
</body>
</html>
<script src="../js/vue.js"></script>
<script src="../js/axios-0.18.0.js"></script>
<script type="text/javascript">
    new Vue({
        el: "#l-map",
        created() {
            this.createMap("l-map")
        },
        methods: {
            createMap(id) {
                axios.get("/address/findAll.do").then(res => {
                    this.dataList = res.data.data;
                    const map = new BMap.Map(id);
                    map.centerAndZoom(new BMap.Point(114.4285890, 30.4835280), 13);
                    map.enableScrollWheelZoom(true);
                    let adds = new Array();
                    for (let i = 0; i < this.dataList.length; i++) {
                        adds.push(new BMap.Point(this.dataList[i].longitude, this.dataList[i].latitude));
                    }
                    for (let i = 0; i < adds.length; i++) {
                        const marker = new BMap.Marker(adds[i]);
                        map.addOverlay(marker);
                        marker.setLabel(new BMap.Label(this.dataList[i].name,
                            {offset: new BMap.Size(20, -10)}));
                    }
                })
            }
        }
    });
</script>
